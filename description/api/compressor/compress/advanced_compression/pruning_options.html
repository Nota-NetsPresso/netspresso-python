

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pruning Options &mdash; NetsPresso 1.13.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css" />

  
    <link rel="shortcut icon" href="../../../../../_static/netspresso_symbol_navy.png"/>
      <script src="../../../../../_static/jquery.js"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
      <script src="../../../../../_static/doctools.js"></script>
      <script src="../../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Get Compression Information" href="../get_compression.html" />
    <link rel="prev" title="Compression Method" href="compression_method.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            NetsPresso
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../description.html">API Description</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../np/index.html">NetsPresso</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../trainer/trainer.html">Trainer</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../compressor.html">Compressor</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../compressor.html#compress">Compress</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../quantizer/quantizer.html">Quantizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../converter/converter.html">Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../benchmarker/benchmarker.html">Benchmarker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../enums/enums.html">Enums</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../npqai/index.html">NetsPresso QAI</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NetsPresso</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../description.html">API Description</a></li>
          <li class="breadcrumb-item"><a href="../../../np/index.html">NetsPresso</a></li>
          <li class="breadcrumb-item"><a href="../../compressor.html">Compressor</a></li>
          <li class="breadcrumb-item"><a href="../advanced_compression.html">Advanced Compression</a></li>
      <li class="breadcrumb-item active">Pruning Options</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/description/api/compressor/compress/advanced_compression/pruning_options.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pruning-options">
<span id="pruning-options-heading"></span><h1><a class="toc-backref" href="#id5" role="doc-backlink">Pruning Options</a><a class="headerlink" href="#pruning-options" title="Permalink to this heading"></a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pruning-options" id="id5">Pruning Options</a></p>
<ul>
<li><p><a class="reference internal" href="#policy" id="id6">Policy</a></p>
<ul>
<li><p><a class="reference internal" href="#sum" id="id7">Sum</a></p></li>
<li><p><a class="reference internal" href="#average" id="id8">Average</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#layer-norm" id="id9">Layer Norm</a></p>
<ul>
<li><p><a class="reference internal" href="#standard-score" id="id10">Standard Score</a></p></li>
<li><p><a class="reference internal" href="#tss-norm-total-sum-scaling-normalization" id="id11">TSS Norm (Total sum scaling normalization)</a></p></li>
<li><p><a class="reference internal" href="#linear-scaling" id="id12">Linear Scaling</a></p></li>
<li><p><a class="reference internal" href="#softmax-norm" id="id13">Softmax Norm</a></p></li>
<li><p><a class="reference internal" href="#none" id="id14">None</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#group-policy" id="id15">Group Policy</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id16">Sum</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id17">Average</a></p></li>
<li><p><a class="reference internal" href="#count" id="id18">Count</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id19">None</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reshape-channel-axis" id="id20">Reshape Channel Axis</a></p></li>
<li><p><a class="reference internal" href="#step-operator" id="id21">Step operator</a></p>
<ul>
<li><p><a class="reference internal" href="#round" id="id22">Round</a></p></li>
<li><p><a class="reference internal" href="#round-up" id="id23">Round Up</a></p></li>
<li><p><a class="reference internal" href="#round-down" id="id24">Round Down</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id25">None</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="policy">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Policy</a><a class="headerlink" href="#policy" title="Permalink to this heading"></a></h2>
<p>The policy of the NetsPresso Model Compressor allows for pruning connected filters or neurons identically using the given pruning criteria while preserving the information.</p>
<p>To calculate the importance score of the connected neurons or filters, “Sum”, “Average” can be used as policies (for more details, please refer to the following documents).</p>
<section id="sum">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Sum</a><a class="headerlink" href="#sum" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The “Sum” policy calculates its importance score as the summation value of the connected filters’ importance scores.</p></li>
</ul>
<a class="reference internal image-reference" href="../../../../../_images/sum.png"><img alt="../../../../../_images/sum.png" class="align-center" src="../../../../../_images/sum.png" style="width: 500px;" /></a>
</div></blockquote>
</section>
<section id="average">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Average</a><a class="headerlink" href="#average" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The “Average” policy calculates its importance score as the average value of the connected filters’ importance scores.</p></li>
</ul>
<a class="reference internal image-reference" href="../../../../../_images/average.png"><img alt="../../../../../_images/average.png" class="align-center" src="../../../../../_images/average.png" style="width: 500px;" /></a>
</div></blockquote>
</section>
</section>
<section id="layer-norm">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Layer Norm</a><a class="headerlink" href="#layer-norm" title="Permalink to this heading"></a></h2>
<p>The normalization process is necessary to compare the importance score of different layer’s filters or neurons.</p>
<section id="standard-score">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Standard Score</a><a class="headerlink" href="#standard-score" title="Permalink to this heading"></a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="../../../../../_images/standard_score.png"><img alt="../../../../../_images/standard_score.png" class="align-center" src="../../../../../_images/standard_score.png" style="width: 500px;" /></a>
</div></blockquote>
</section>
<section id="tss-norm-total-sum-scaling-normalization">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">TSS Norm (Total sum scaling normalization)</a><a class="headerlink" href="#tss-norm-total-sum-scaling-normalization" title="Permalink to this heading"></a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="../../../../../_images/tss_norm.png"><img alt="../../../../../_images/tss_norm.png" class="align-center" src="../../../../../_images/tss_norm.png" style="width: 250px;" /></a>
</div></blockquote>
</section>
<section id="linear-scaling">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Linear Scaling</a><a class="headerlink" href="#linear-scaling" title="Permalink to this heading"></a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="../../../../../_images/linear_scaling.png"><img alt="../../../../../_images/linear_scaling.png" class="align-center" src="../../../../../_images/linear_scaling.png" style="width: 500px;" /></a>
</div></blockquote>
</section>
<section id="softmax-norm">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Softmax Norm</a><a class="headerlink" href="#softmax-norm" title="Permalink to this heading"></a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="../../../../../_images/softmax_norm.png"><img alt="../../../../../_images/softmax_norm.png" class="align-center" src="../../../../../_images/softmax_norm.png" style="width: 300px;" /></a>
</div></blockquote>
</section>
<section id="none">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">None</a><a class="headerlink" href="#none" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Normalization will not be used to compare the importance of  the different layer.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="group-policy">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Group Policy</a><a class="headerlink" href="#group-policy" title="Permalink to this heading"></a></h2>
<p>The reshape and group convolutional operator should prune the same number of filters for each group to preserve the shape of the weight or arguments.</p>
<p>For this reason, the group policy is used to ensure that the same number of filters are pruned for each group.</p>
<section id="id1">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Sum</a><a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The group policy “sum” calculates its importance score as the summation value of the corresponding filter index of all groups.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Average</a><a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The group policy “Average” calculates its importance score as the average value of the corresponding filter index of all groups.</p></li>
</ul>
</div></blockquote>
</section>
<section id="count">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Count</a><a class="headerlink" href="#count" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The importance score of each groups’ filter will be measured independently, and the minimum number of filters for the given group will be removed identically for given groups.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">None</a><a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The group policy “None” will prune same amount of the filters to perserve the shape of the weight. None of the policy will be used to represnt the filter index of group.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="reshape-channel-axis">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Reshape Channel Axis</a><a class="headerlink" href="#reshape-channel-axis" title="Permalink to this heading"></a></h2>
<p>Reshape channel axis represents which axis of the reshape operator will be pruned.</p>
<ul>
<li><p>Ex. Consider the input of the given reshape operator is <cite>batch, 768, 197</cite> and the output of the reshape operator is <cite>batch, 12, 64, 197</cite></p>
<blockquote>
<div><ul class="simple">
<li><p>If the <cite>reshape_channel_axis</cite> is <cite>-1</cite> or <cite>1</cite> when the given pruning ratio is 50%, the output model will contain <cite>32 (64*0.5)</cite> channels of the given reshape operator.</p></li>
<li><p>If the <cite>reshape_channel_axis</cite> is <cite>-2</cite> or <cite>0</cite> when the given pruning ratio is 50%, the output model will contain <cite>6 (12*0.5)</cite> channels of the given reshape operator.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="step-operator">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">Step operator</a><a class="headerlink" href="#step-operator" title="Permalink to this heading"></a></h2>
<p>Step operator is the method of rounding applied to ensure that the amount remaining after pruning aligns with the step_size.</p>
<p>Options include Round, Round Up, Round Down, or None.</p>
<section id="round">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Round</a><a class="headerlink" href="#round" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Rounds to the nearest step size, adjusting the remaining count of filters.</p></li>
</ul>
</div></blockquote>
</section>
<section id="round-up">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Round Up</a><a class="headerlink" href="#round-up" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Always rounds up to the next step size, directly affecting the remaining filters.</p></li>
</ul>
</div></blockquote>
</section>
<section id="round-down">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Round Down</a><a class="headerlink" href="#round-down" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Always rounds down to the closest lower step size, impacting the remaining filters.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">None</a><a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>No rounding operation is applied; the exact amount is used for pruning.</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="compression_method.html" class="btn btn-neutral float-left" title="Compression Method" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../get_compression.html" class="btn btn-neutral float-right" title="Get Compression Information" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, Nota Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>